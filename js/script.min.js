"use strict";var contactsLink=document.querySelector(".contacts__button"),modalContacts=document.querySelector(".modal--contacts");if(modalContacts){var modalContactsClose=modalContacts.querySelector(".modal__close"),contactsForm=modalContacts.querySelector(".contacts-form"),userData={name:document.getElementById("contacts-name"),email:document.getElementById("contacts-email"),message:document.getElementById("contacts-message")},isStorageSupport=!0,storage={name:"",email:""};try{storage.name=localStorage.getItem("name"),storage.email=localStorage.getItem("email")}catch(e){isStorageSupport=!1}contactsLink.addEventListener("click",function(e){e.preventDefault(),modalShow(modalContacts),storage.name&&storage.email?(userData.name.value=storage.name,userData.email.value=storage.email,userData.message.focus()):userData.name.focus()}),modalContactsClose.addEventListener("click",function(e){e.preventDefault(),modalClose()}),contactsForm.addEventListener("submit",function(e){userData.name.value&&userData.email.value&&userData.message.value?isStorageSupport&&(localStorage.setItem("name",userData.name.value),localStorage.setItem("email",userData.email.value)):(e.preventDefault(),modalContacts.classList.remove("modal--error"),modalContacts.offsetWidth,modalContacts.classList.add("modal--error"),userData.name.value?userData.email.value?userData.message.focus():userData.email.focus():userData.name.focus())})}window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),modalClose())});var overlay=document.querySelector(".overlay");overlay.addEventListener("click",function(){modalClose()});for(var sliderDots=document.querySelectorAll(".slider__indicator"),slides=document.querySelectorAll(".slider__item"),sliderDotActive=document.querySelector(".slider__indicator--active"),slideActive=document.querySelector(".slider__item--active"),addDotClickHandler=function(t,r){t.addEventListener("click",function(e){e.preventDefault(),t!==sliderDotActive&&(sliderDotActive.classList.remove("slider__indicator--active"),slideActive.classList.remove("slider__item--active"),t.classList.add("slider__indicator--active"),r.classList.add("slider__item--active"),sliderDotActive=t,slideActive=r)})},i=0;i<sliderDots.length;i++)addDotClickHandler(sliderDots[i],slides[i]);var slider=document.querySelector(".filters-form__slider");if(slider){var rangeWidth=200,sliderIndent=20,thumbHalfWidth=10,price={min:0,max:21429},thumbs=slider.querySelectorAll(".filters-form__thumb"),isDragging=[!1,!1];thumbs[0].addEventListener("mousedown",function(){isDragging[0]=!0}),thumbs[1].addEventListener("mousedown",function(){isDragging[1]=!0}),slider.addEventListener("mouseup",function(){isDragging=[!1,!1]});var track=slider.querySelector(".filters-form__track"),inputs=document.querySelectorAll(".filters-form__price input"),rangeRatio=rangeWidth/(price.max-price.min),currentPrice={min:inputs[0].value,max:inputs[1].value};moveLeftThumb(currentPrice.min),moveRightThumb(currentPrice.max),slider.addEventListener("mousemove",function(e){isDragging[0]&&(currentPrice.min=Math.round(mousePosX(slider,e)/rangeRatio)+price.min,currentPrice.min<currentPrice.max&&currentPrice.min>=price.min&&(moveLeftThumb(currentPrice.min),inputs[0].value=currentPrice.min)),isDragging[1]&&(currentPrice.max=Math.round(mousePosX(slider,e)/rangeRatio)+price.min,currentPrice.max>currentPrice.min&&currentPrice.max<=price.max&&(moveRightThumb(currentPrice.max),inputs[1].value=currentPrice.max))}),inputs[0].addEventListener("blur",function(){inputs[0].value!==currentPrice.min&&(inputs[0].value<price.min?inputs[0].value=price.min:Number(inputs[0].value)>=currentPrice.max&&(inputs[0].value=currentPrice.max-1),currentPrice.min=inputs[0].value,moveLeftThumb(currentPrice.min))}),inputs[1].addEventListener("blur",function(){inputs[1].value!==currentPrice.max&&(inputs[1].value>price.max?inputs[1].value=price.max:inputs[1].value<=Number(currentPrice.min)&&(inputs[1].value=Number(currentPrice.min)+1),currentPrice.max=inputs[1].value,moveRightThumb(currentPrice.max))})}function initMap(){var e=new google.maps.Map(document.querySelector(".contacts__map"),{zoom:17,center:{lat:59.939105,lng:30.321487},disableDefaultUI:!0});new google.maps.Marker({position:{lat:59.938723,lng:30.323789},map:e,icon:"img/map-marker.png"})}function modalShow(e){e.classList.add("modal--shown"),overlay.classList.add("overlay--shown")}function modalClose(){var e=document.querySelector(".modal--shown");e&&(e.classList.remove("modal--shown"),overlay.classList.remove("overlay--shown"),e.classList.contains("modal--error")&&e.classList.remove("modal--error"))}function moveLeftThumb(e){thumbs[0].style.left=(e-price.min)*rangeRatio+sliderIndent+"px",track.style.left=(e-price.min)*rangeRatio+thumbHalfWidth+"px"}function moveRightThumb(e){thumbs[1].style.right=(price.max-e)*rangeRatio+sliderIndent+"px",track.style.right=(price.max-e)*rangeRatio+thumbHalfWidth+"px"}function mousePosX(e,t){var r=Math.round(t.clientX-e.getBoundingClientRect().left)-(sliderIndent+thumbHalfWidth);return r<0?0:rangeWidth<r?rangeWidth:r}
//# sourceMappingURL=script.min.js.map
