{"version":3,"sources":["script.js"],"names":["contactsLink","document","querySelector","modalContacts","modalContactsClose","contactsForm","userData","name","getElementById","email","message","isStorageSupport","storage","localStorage","getItem","err","addEventListener","evt","preventDefault","modalShow","value","focus","modalClose","setItem","classList","remove","offsetWidth","add","window","keyCode","overlay","elmt","modalShown","contains"],"mappings":"AAAA,aAGA,IAAIA,aAAeC,SAASC,cAAc,qBAEtCC,cAAgBF,SAASC,cAAc,oBAE3C,GAAIC,cAAe,CACjB,IAAIC,mBAAqBD,cAAcD,cAAc,iBAEjDG,aAAeF,cAAcD,cAAc,kBAC3CI,SAAW,CACbC,KAAMN,SAASO,eAAe,iBAC9BC,MAAOR,SAASO,eAAe,kBAC/BE,QAAST,SAASO,eAAe,qBAG/BG,kBAAmB,EACnBC,QAAU,CACZL,KAAM,GACNE,MAAO,IAIT,IACEG,QAAQL,KAAOM,aAAaC,QAAQ,QACpCF,QAAQH,MAAQI,aAAaC,QAAQ,SACrC,MAAOC,GACPJ,kBAAmB,EAIrBX,aAAagB,iBAAiB,QAAS,SAAUC,GAC/CA,EAAIC,iBACJC,UAAUhB,eAENS,QAAQL,MAAQK,QAAQH,OAC1BH,SAASC,KAAKa,MAAQR,QAAQL,KAC9BD,SAASG,MAAMW,MAAQR,QAAQH,MAC/BH,SAASI,QAAQW,SAEjBf,SAASC,KAAKc,UAKlBjB,mBAAmBY,iBAAiB,QAAS,SAAUC,GACrDA,EAAIC,iBACJI,eAIFjB,aAAaW,iBAAiB,SAAU,SAAUC,GAC3CX,SAASC,KAAKa,OAAUd,SAASG,MAAMW,OAAUd,SAASI,QAAQU,MAa5DT,mBACTE,aAAaU,QAAQ,OAAQjB,SAASC,KAAKa,OAC3CP,aAAaU,QAAQ,QAASjB,SAASG,MAAMW,SAd7CH,EAAIC,iBACJf,cAAcqB,UAAUC,OAAO,gBAC1BtB,cAAcuB,YACnBvB,cAAcqB,UAAUG,IAAI,gBAEvBrB,SAASC,KAAKa,MAEPd,SAASG,MAAMW,MAGzBd,SAASI,QAAQW,QAFjBf,SAASG,MAAMY,QAFff,SAASC,KAAKc,WActBO,OAAOZ,iBAAiB,UAAW,SAAUC,GACvB,KAAhBA,EAAIY,UACNZ,EAAIC,iBACJI,gBAKJ,IAAIQ,QAAU7B,SAASC,cAAc,YAOrC,SAASiB,UAAUY,GACjBA,EAAKP,UAAUG,IAAI,gBACnBG,QAAQN,UAAUG,IAAI,kBAIxB,SAASL,aACP,IAAIU,EAAa/B,SAASC,cAAc,iBAEpC8B,IACFA,EAAWR,UAAUC,OAAO,gBAC5BK,QAAQN,UAAUC,OAAO,kBAErBO,EAAWR,UAAUS,SAAS,iBAChCD,EAAWR,UAAUC,OAAO,iBAnBlCK,QAAQd,iBAAiB,QAAS,WAChCM","file":"script.min.js","sourcesContent":["'use strict';\n\n// Оживление всплывающего окна формы обратной связи\nvar contactsLink = document.querySelector('.contacts__button');\n\nvar modalContacts = document.querySelector('.modal--contacts');\n\nif (modalContacts) {\n  var modalContactsClose = modalContacts.querySelector('.modal__close');\n\n  var contactsForm = modalContacts.querySelector('.contacts-form');\n  var userData = {\n    name: document.getElementById('contacts-name'),\n    email: document.getElementById('contacts-email'),\n    message: document.getElementById('contacts-message')\n  };\n\n  var isStorageSupport = true;\n  var storage = {\n    name: '',\n    email: ''\n  };\n\n  // Проверка, работает ли localStorage\n  try {\n    storage.name = localStorage.getItem('name');\n    storage.email = localStorage.getItem('email');\n  } catch (err) {\n    isStorageSupport = false;\n  }\n\n  // Появление всплывающего окна\n  contactsLink.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    modalShow(modalContacts);\n\n    if (storage.name && storage.email) {\n      userData.name.value = storage.name;\n      userData.email.value = storage.email;\n      userData.message.focus();\n    } else {\n      userData.name.focus();\n    }\n  });\n\n  // Закрытие всплывающего окна\n  modalContactsClose.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    modalClose();\n  });\n\n  // Сохранеие данных пользователя в localStorage\n  contactsForm.addEventListener('submit', function (evt) {\n    if (!userData.name.value || !userData.email.value || !userData.message.value) {\n      evt.preventDefault();\n      modalContacts.classList.remove('modal--error');\n      void modalContacts.offsetWidth;\n      modalContacts.classList.add('modal--error');\n\n      if (!userData.name.value) {\n        userData.name.focus();\n      } else if (!userData.email.value) {\n        userData.email.focus();\n      } else {\n        userData.message.focus();\n      }\n    } else if (isStorageSupport) {\n      localStorage.setItem('name', userData.name.value);\n      localStorage.setItem('email', userData.email.value);\n    }\n  });\n}\n\n// Закрытие всплывающего окна по нажатию Esc\nwindow.addEventListener('keydown', function (evt) {\n  if (evt.keyCode === 27) {\n    evt.preventDefault();\n    modalClose();\n  }\n});\n\n// Закрытие всплывающего окна по клику вне окна\nvar overlay = document.querySelector('.overlay');\n\noverlay.addEventListener('click', function () {\n  modalClose();\n});\n\n// Появление всплывающего окна\nfunction modalShow(elmt) {\n  elmt.classList.add('modal--shown');\n  overlay.classList.add('overlay--shown');\n}\n\n// Закрытие всплывающего окна\nfunction modalClose() {\n  var modalShown = document.querySelector('.modal--shown');\n\n  if (modalShown) {\n    modalShown.classList.remove('modal--shown');\n    overlay.classList.remove('overlay--shown');\n\n    if (modalShown.classList.contains('modal--error')) {\n      modalShown.classList.remove('modal--error');\n    }\n  }\n}\n"]}